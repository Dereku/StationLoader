package net.modificationstation.stationloader.loaders;

import java.applet.Applet;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;

public class SLReloader {
    private SLReloader() {
        URL[] urls = ((URLClassLoader)getClass().getClassLoader()).getURLs();
        slClassLoader = new StationClassLoader(urls);
    }
    public static void relaunchMC(String mcargs[]) {
        args = mcargs;
        try {
            Class<?> minecraft = Class.forName("net.minecraft.client.Minecraft", false, slClassLoader);
            Method method = minecraft.getDeclaredMethod("relaunch");
            method.invoke(null);
        } catch (Exception e) {e.printStackTrace();}
    }
    public static void relaunchApplet(Applet minecraftApplet) {
        applet = minecraftApplet;
        try {
            Class<?> minecraft = Class.forName("net.minecraft.client.MinecraftApplet", false, slClassLoader);
            Method method = minecraft.getDeclaredMethod("relaunch");
            method.invoke(minecraftApplet);
        } catch (Exception e) {e.printStackTrace();}
    }

    public static void restartApplet() {
        try {
            Class<?> minecraft = Class.forName("net.minecraft.client.MinecraftApplet", false, slClassLoader);
            Method method = minecraft.getDeclaredMethod("restart");
            method.invoke(applet);
        } catch (Exception e) {e.printStackTrace();}
    }
    public static final SLReloader INSTANCE = new SLReloader();
    public static ClassLoader slClassLoader;
    public static Applet applet;
    public static String args[];
}
