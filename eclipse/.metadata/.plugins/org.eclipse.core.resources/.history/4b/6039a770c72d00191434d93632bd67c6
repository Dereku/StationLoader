package net.modificationstation.stationloader.client;

import java.lang.reflect.Field;

import net.minecraft.src.FontRenderer;
import net.minecraft.src.GuiMainMenu;
import net.minecraft.src.GuiScreen;
import net.minecraft.src.ScaledResolution;
import net.modificationstation.stationloader.client.minecraft.gui.GuiMainMenuSL;
import net.modificationstation.stationloader.common.StationHooks;
import net.modificationstation.stationloader.events.client.MCGuiScreenDisplayedEvent;
import net.modificationstation.stationloader.events.client.MCPreDisplayGuiScreen;
import net.modificationstation.stationloader.events.common.Event;

public class StationClientHooks extends StationHooks{

    public static GuiScreen preDisplayGuiScreen(GuiScreen guiscreen) {
        MCPreDisplayGuiScreen event = new MCPreDisplayGuiScreen(guiscreen);
        event.process();
        return event.getGuiScreen();
    }
    public static void guiScreenDisplayed(GuiScreen guiscreen, ScaledResolution scaledresolution, int i, int j) {
        if (guiscreen instanceof GuiMainMenu) {
            try {
                Class<?> clazz = guiscreen.getClass();
                Field[] fields = clazz.getDeclaredFields();
                for (Field field : fields) {
                    field.setAccessible(true);
                    if (field.get(guiscreen).getClass().equals(FontRenderer.class))
                        new GuiMainMenuSL((FontRenderer)field.get(guiscreen)).drawScreen();
                }
            } catch (Exception e) {e.printStackTrace();}
        }
        Event event = new MCGuiScreenDisplayedEvent(guiscreen, scaledresolution, i, j);
        event.process();
    }
}
